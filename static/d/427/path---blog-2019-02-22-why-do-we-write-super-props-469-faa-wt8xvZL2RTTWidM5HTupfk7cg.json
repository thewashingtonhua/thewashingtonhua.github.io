{"data":{"site":{"siteMetadata":{"title":"ç«¥è¯è¯´","keywords":["tonghuashuo","github","front-end","javascript","typescript","react","node","washington","hua","ç«¥è¯","ç«¥è¯è¯´","å‰ç«¯","åšå®¢","æŠ€æœ¯","è®¡ç®—æœº","äº’è”ç½‘"]}},"markdownRemark":{"html":"<blockquote>\n<p>åŸæ–‡åœ°å€ï¼š<a target='_blank' href=https://overreacted.io/why-do-we-write-super-props/>Why Do We Write super(props)?</a></p>\n<p>åŸæ–‡ä½œè€…ï¼š<a target='_blank' href=https://twitter.com/dan_abramov>Dan Abramov</a></p>\n</blockquote>\n<p>æˆ‘å¬è¯´ <a target='_blank' href='https://reactjs.org/docs/hooks-intro.html'>Hooks</a> æœ€è¿‘å¾ˆç«ã€‚è®½åˆºçš„æ˜¯ï¼Œæˆ‘æƒ³ä»¥ä¸€äº›å…³äº class ç»„ä»¶çš„æœ‰è¶£æ•…äº‹æ¥å¼€å§‹è¿™ä¸ªåšå®¢ã€‚æ€æ ·ï¼ï¼ˆçš®ä¸€ä¸‹å¾ˆå¼€å¿ƒï¼‰</p>\n<p>è¿™äº›å°å‘å¹¶ä¸ä¼šå½±å“ä½ é«˜æ•ˆçš„ä½¿ç”¨ Reactï¼Œä½†å¦‚æœä½ æ„¿æ„æ·±å…¥äº†è§£ä¸‹èƒŒåçš„å·¥ä½œåŸç†ï¼Œä½ ä¼šå‘ç°å®ƒä»¬éå¸¸æœ‰æ„æ€ã€‚</p>\n<p>è¿™æ˜¯ç¬¬ä¸€ä¸ªã€‚</p>\n<hr>\n<p>æˆ‘è¿™è¾ˆå­å†™è¿‡çš„ <code class=\"gatsby-code-text\">super(props)</code> æ¯”æˆ‘æƒ³è±¡çš„è¦å¤šå¾—å¤š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å½“ç„¶ï¼Œ<a target='_blank' href='https://github.com/tc39/proposal-class-fields'>class fields proposal</a> å…è®¸æˆ‘ä»¬è·³è¿‡è¿™ä¸ªä»ªå¼ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>è¿™æ ·çš„è¯­æ³•æ˜¯åœ¨ 2015 å¹´ React 0.13 å¢åŠ å¯¹çº¯ Class çš„æ”¯æŒçš„æ—¶å€™åŠ å…¥ <a target='_blank' href='https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#es7-property-initializers'>è®¡åˆ’</a> çš„. å®šä¹‰ <code class=\"gatsby-code-text\">constructor</code> å’Œè°ƒç”¨ <code class=\"gatsby-code-text\">super(props)</code> ä¸€ç›´éƒ½åªæ˜¯ class fiels å‡ºç°ä¹‹å‰çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>ç„¶è€Œï¼Œè®©æˆ‘ä»¬åªç”¨ ES2015  çš„ç‰¹æ€§æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªä¾‹å­ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è°ƒç”¨<code class=\"gatsby-code-text\">super</code>ï¼Ÿèƒ½ä¸èƒ½ä¸è°ƒç”¨å®ƒï¼Ÿå¦‚æœéè¦è°ƒç”¨ï¼Œå¦‚æœä¸ä¼  <code class=\"gatsby-code-text\">props</code> ä¼šæ€æ ·ï¼Ÿè¿˜æœ‰å…¶å®ƒå‚æ•°å—ï¼Ÿ</strong>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚</p>\n<p>åœ¨ JavaScript ä¸­ï¼Œ<code class=\"gatsby-code-text\">super</code> æŒ‡ä»£çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ï¼ˆåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå®ƒæŒ‡å‘ <code class=\"gatsby-code-text\">React.Component</code> è¿™ä¸ªå®ç°ï¼‰</p>\n<p>é‡ç‚¹åœ¨äºï¼Œåœ¨ä½ è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å‰ï¼Œä½ æ— æ³•åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code class=\"gatsby-code-text\">this</code>ã€‚JavaScript ä¸ä¼šå…è®¸ä½ è¿™ä¹ˆåšã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ğŸ”´ è¿˜ä¸èƒ½ä½¿ç”¨ `this`</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// âœ… ç°åœ¨å¯ä»¥äº†</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>JavaScript å¼ºåˆ¶ä½ åœ¨ä½¿ç”¨ <code class=\"gatsby-code-text\">this</code> å‰è¿è¡Œçˆ¶ç±»æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ã€‚è€ƒè™‘è¿™æ ·ä¸€ä¸ªç±»ç»“æ„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PolitePerson</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ”´ This is disallowed, read below why</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Good morning folks!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>æƒ³è±¡ä¸€ä¸‹å¦‚æœåœ¨è°ƒç”¨ <code class=\"gatsby-code-text\">super</code> å‰ä½¿ç”¨ <code class=\"gatsby-code-text\">this</code> æ˜¯è¢«å…è®¸çš„ã€‚ä¸€ä¸ªæœˆä¹‹åã€‚æˆ‘ä»¬æˆ–è®¸ä¼šæ”¹å˜ <code class=\"gatsby-code-text\">greetColleagues</code> æŠŠ person çš„ name åŠ åˆ°æ¶ˆæ¯ä¸­ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Good morning folks!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'My name is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">', nice to meet you!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†æˆ‘ä»¬å¿˜äº† <code class=\"gatsby-code-text\">this.greetColleagues()</code> æ˜¯åœ¨ <code class=\"gatsby-code-text\">super()</code> æœ‰æœºä¼šè®¾ç½® <code class=\"gatsby-code-text\">this.name</code> ä¹‹å‰è¢«è°ƒç”¨çš„ã€‚<code class=\"gatsby-code-text\">this.name</code> ç”šè‡³è¿˜æ²¡è¢«å®šä¹‰ï¼å¦‚ä½ æ‰€è§ï¼Œåƒè¿™æ ·çš„ä»£ç ç†è§£èµ·æ¥ä¼šå¾ˆå›°éš¾ã€‚</p>\n<p>ä¸ºäº†é¿å…è¿™æ ·çš„é™·é˜±ï¼Œ<strong>JavaScript å¼ºåˆ¶è§„å®šï¼Œå¦‚æœä½ æƒ³åœ¨æ„é€ å‡½æ•°ä¸­åªç”¨<code class=\"gatsby-code-text\">this</code>ï¼Œå°±å¿…é¡»å…ˆè°ƒç”¨ <code class=\"gatsby-code-text\">super</code></strong>ã€‚è®©çˆ¶ç±»åšå®ƒè¯¥åšçš„äº‹ï¼è¿™ä¸€é™åˆ¶ä¹Ÿé€‚ç”¨äºå®šä¹‰æˆç±»çš„ React ç»„ä»¶ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// âœ… ç°åœ¨å¯ä»¥ä½¿ç”¨ `this` äº†</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>è¿™ç»™æˆ‘ä»¬ç•™ä¸‹äº†å¦ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä¼  <code class=\"gatsby-code-text\">props</code>ï¼Ÿ</p>\n<hr>\n<p>ä½ æˆ–è®¸è§‰å¾—æŠŠ <code class=\"gatsby-code-text\">props</code> ä¼ è¿› <code class=\"gatsby-code-text\">super</code> æ˜¯å¿…è¦çš„ï¼Œè¿™ä½¿å¾—åŸºç±» <code class=\"gatsby-code-text\">React.Component</code> å¯ä»¥åˆå§‹åŒ– <code class=\"gatsby-code-text\">this.props</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// åœ¨ React å†…éƒ¨</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¾ˆæ¥è¿‘äº†â€”â€”äº‹å®ä¸Šï¼Œ<a target='_blank' href='https://github.com/facebook/react/blob/1d25aa5787d4e19704c049c3cfa985d3b5190e0d/packages/react/src/ReactBaseClasses.js#L22'>å®ƒå°±æ˜¯è¿™ä¹ˆåšçš„</a>ã€‚</p>\n<p>ç„¶è€Œï¼Œå³ä¾¿åœ¨è°ƒç”¨ <code class=\"gatsby-code-text\">super()</code> æ—¶æ²¡æœ‰ä¼ å…¥ <code class=\"gatsby-code-text\">props</code> å‚æ•°ï¼Œä½ ä¾ç„¶èƒ½å¤Ÿåœ¨ <code class=\"gatsby-code-text\">render</code> å’Œå…¶å®ƒæ–¹æ³•ä¸­è®¿é—® <code class=\"gatsby-code-text\">this.props</code>ã€‚ï¼ˆä½ è¦æ˜¯ä¸ç›¸ä¿¡æˆ‘ï¼Œå¯ä»¥è‡ªå·±è¯•ä¸€è¯•ï¼‰</p>\n<p>è¿™æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿå…¶å® <strong>React åœ¨è°ƒç”¨ä½ çš„æ„é€ å‡½æ•°ä¹‹åï¼Œé©¬ä¸Šåˆç»™å®ä¾‹è®¾ç½®äº†ä¸€é <code class=\"gatsby-code-text\">props</code></strong>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// åœ¨ React å†…éƒ¨</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>å› æ­¤ï¼Œå³ä¾¿ä½ å¿˜äº†æŠŠ <code class=\"gatsby-code-text\">props</code> ä¼ å…¥ <code class=\"gatsby-code-text\">super()</code>ï¼ŒReact ä¾ç„¶ä¼šåœ¨äº‹åè®¾ç½®å®ƒä»¬ã€‚è¿™æ˜¯æœ‰ç†ç”±çš„ã€‚</p>\n<p>å½“ React æ·»åŠ å¯¹ Class çš„æ”¯æŒæ—¶ï¼Œå®ƒå¹¶ä¸æ˜¯åªæ·»åŠ äº†å¯¹ ES6 çš„æ”¯æŒï¼Œè€Œæ˜¯å¸Œæœ›èƒ½å¤Ÿæ”¯æŒå°½å¯èƒ½å¹¿æ³›çš„ class æŠ½è±¡ã€‚ç”±äº <a target='_blank' href='https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#other-languages'>ä¸æ˜¯å¾ˆç¡®å®š</a> ClojureScriptã€CoffeeScriptã€ES6ã€Fableã€Scala.jsã€TypeScript æˆ–å…¶ä»–è§£å†³æ–¹æ¡ˆè°æ›´é€‚åˆç”¨æ¥å®šä¹‰ç»„ä»¶ï¼ŒReact å¯¹äºæ˜¯å¦æœ‰å¿…è¦è°ƒç”¨ <code class=\"gatsby-code-text\">super()</code> åˆ»æ„ä¸è¡¨æ€ã€‚</p>\n<p>é‚£ä¹ˆè¿™æ˜¯å¦æ„å‘³ç€ä½ å¯ä»¥åªå†™ <code class=\"gatsby-code-text\">super()</code> è€Œä¸ç”¨ <code class=\"gatsby-code-text\">super(props)</code>ï¼Ÿ</p>\n<p><strong>æˆ–è®¸å¹¶éå¦‚æ­¤ï¼Œå› ä¸ºè¿™ä¾ç„¶è®©äººå›°æ‰°</strong>ã€‚è¯šç„¶ï¼ŒReact ä¼šåœ¨ä½ çš„æ„é€ å‡½æ•°è¿è¡Œä¹‹åè®¾ç½® <code class=\"gatsby-code-text\">this.props</code>ã€‚ä½†åœ¨ <code class=\"gatsby-code-text\">super</code> è°ƒç”¨ä¸€ç›´åˆ°æ„é€ å‡½æ•°ç»“æŸä¹‹å‰ï¼Œ<code class=\"gatsby-code-text\">this.props</code> ä¾ç„¶æ˜¯æœªå®šä¹‰çš„ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// åœ¨ React å†…éƒ¨</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Inside your code</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// âœ… {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜¬ undefined</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¦‚æœè¿™å‘ç”Ÿåœ¨æŸäº›ä»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çš„å‡½æ•°ï¼Œè°ƒè¯•èµ·æ¥ä¼šæ›´åŠ éº»çƒ¦ã€‚<strong>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘æ¨èæ€»æ˜¯ä½¿ç”¨ <code class=\"gatsby-code-text\">super(props)</code> çš„å†™æ³•ï¼Œå³ä¾¿è¿™æ˜¯éå¿…è¦çš„</strong>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-jsx line-numbers\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… æˆ‘ä»¬ä¼ å…¥äº† props</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// âœ… {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… {}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>è¿™æ ·çš„å†™æ³•ç¡®ä¿äº† <code class=\"gatsby-code-text\">this.props</code>å³ä¾¿åœ¨æ„é€ å‡½æ•°è¿”å›ä¹‹å‰å°±è¢«è®¾ç½®å¥½äº†ã€‚</p>\n<hr>\n<p>æœ€åè¿˜æœ‰ä¸€ç‚¹æ˜¯ React çš„é•¿æœŸç”¨æˆ·æˆ–è®¸ä¼šå¥½å¥‡çš„ã€‚</p>\n<p>ä½ æˆ–è®¸å·²ç»æ³¨æ„åˆ°ï¼Œå½“ä½ åœ¨ Class ä¸­ä½¿ç”¨ Context API æ—¶ï¼ˆæ— è®ºæ˜¯æ—§ç‰ˆçš„è¯­æ³•è¿˜æ˜¯ React 16.6 ä¸­æ–°å¢çš„ç°ä»£åŒ–è¯­æ³•ï¼‰ï¼Œcontext æ˜¯è¢«ä½œä¸ºæ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥çš„ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸å†™ <code class=\"gatsby-code-text\">super(props, context)</code> å‘¢ï¼Ÿå½“ç„¶æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼Œä½† context çš„ä½¿ç”¨é¢‘ç‡æ²¡é‚£ä¹ˆé«˜ï¼Œæ‰€ä»¥è¿™ä¸ªé™·é˜±å½±å“è¿˜æ²¡é‚£ä¹ˆå¤§ã€‚</p>\n<p><strong>ä¼´éšç€ class fields proposal çš„å‘å¸ƒï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±ä¸å¤å­˜åœ¨äº†ã€‚</strong>å³ä¾¿ä¸æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰å‚æ•°ä¹Ÿä¼šè‡ªåŠ¨ä¼ å…¥ã€‚è¿™å°±å…è®¸åƒ <code class=\"gatsby-code-text\">state = {}</code> è¿™æ ·çš„è¡¨è¾¾å¼åœ¨å¿…è¦æ—¶å¯ä»¥ç›´æ¥å¼•ç”¨ <code class=\"gatsby-code-text\">this.props.</code> æˆ– <code class=\"gatsby-code-text\">this.context</code>ã€‚</p>\n<p>åœ¨ Hooks ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½æ²¡æœ‰ <code class=\"gatsby-code-text\">super</code> æˆ– <code class=\"gatsby-code-text\">this</code>ã€‚è¿™ä¸ªè¯é¢˜æˆ‘ä»¬æ‹©æ—¥å†è¯´ã€‚</p>","frontmatter":{"title":"ã€è¯‘ã€‘æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å†™ super(props)?","description":"å¥½åƒçŸ¥é“ï¼Œåˆå¥½åƒä¸çŸ¥é“","cover":{"publicURL":"/static/overreacted-9fbf74366dc5b9e4aab57572a9f0470d.jpg"},"tags":["react"],"series":"overreacted","draft":false},"fields":{"id":"why-do-we-write-super-props","date":"2019-02-21T16:00:00.000Z"}}},"pageContext":{"slug":"/blog/2019/02/22/why-do-we-write-super-props"}}